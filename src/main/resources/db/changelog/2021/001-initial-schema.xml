<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd"
        logicalFilePath="001-initial-schema.xml">

    <changeSet  id="001"  author="ChDA">
    <!--Имена продуктов-->
      <createTable  tableName="products">
        <column  name="IDProduct"  type="int" autoIncrement="true">
          <constraints  primaryKey="true"  nullable="false" />
        </column>

        <column  name="Name vegetable "  type="varchar(50)">
          <constraints  nullable="false"/>
        </column>
      </createTable>
      <!--Еденица измерения-->
      <createTable tableName="units">
        <column name="IDUnit" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false" />
        </column>

        <column name="Product unit" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Designation  unit" type="varchar(20)">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Тип склада-->
      <createTable tableName="type warehouse">
        <column name="IDTypeWare" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false" />
        </column>

        <column name="Name  warehouse" type="varchar(50)">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Клиент-->
      <createTable tableName="clients">
        <column name="IDClients" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false" />
        </column>

        <column name="Client name" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Code UNP" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Legal address" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Telephone number" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Working position" type="varchar(50)">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Сотрудник склада-->
      <createTable tableName="employee warehouse">
        <column name="IDEmpWare" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false" />
        </column>

        <column name="Full name" type="varchar(60)">
          <constraints nullable="false"/>
        </column>

        <column name="Date birth" type="date">
          <constraints nullable="true"/>
        </column>

        <column name="Position" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Address accommodation" type="varchar(100)">
          <constraints nullable="false"/>
        </column>
        
        <column name="Telephone home" type="varchar(20)">
          <constraints nullable="false"/>
        </column>

        <column name="Telephone mobil" type="varchar(20)">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Поставщики-->
      <createTable tableName="Suppliers">
        <column name="IDSuppliers" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false" />
        </column>

        <column name="Supplier name" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Code UNP" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Legal address" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Telephone number" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Working position" type="varchar(50)">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Товары-->
      <createTable tableName="Goods">
        <column name="IDGoods" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false" />
        </column>

        <column name="Product" type="int">
          <constraints nullable="false"/>
        </column>

        <column name="Name variety" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Shelf life" type="date">
          <constraints nullable="false"/>
        </column>

        <column name="Unit" type="int">
          <constraints nullable="false"/>
        </column>

        <column name="Name manufacture" type="varchar(100)">
          <constraints nullable="false"/>
        </column>

        <column name="Country manufacture" type="varchar(100)">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Инициализацйия ключей таблицы Товары-->
      <addForeignKeyConstraint baseColumnNames="IDProduct"
                               baseTableName="products"
                               constraintName="fk_products_Goods"
                               referencedColumnNames="Product"
                               referencedTableName="Goods"/>

      <addForeignKeyConstraint baseColumnNames="IDUnit"
                               baseTableName="Unit"
                               constraintName="fk_Unit_Goods"
                               referencedColumnNames="Unit"
                               referencedTableName="Goods"/>
      <!--База продуктов-->
      <createTable tableName="Base products">
        <column name="Barcode" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false"/>
        </column>

        <column name="Warehouse" type="int">
          <constraints nullable="false"/>
        </column>

        <column name="Products" type="int">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Инициализацйия ключей таблицы База продуктов-->
      <addForeignKeyConstraint baseColumnNames="IDTypeWare"
                               baseTableName="type warehouse"
                               constraintName="fk_type warehouse_Base products"
                               referencedColumnNames="Warehouse"
                               referencedTableName="Base products"/>

      <addForeignKeyConstraint baseColumnNames="IDGoods"
                               baseTableName="Goods"
                               constraintName="fk_Goods_Base products"
                               referencedColumnNames="Products"
                               referencedTableName="Base products"/>

      <!--Приходная накладная-->
      <createTable tableName="Purchase Invoice">
        <column name="IDPurInv" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false"/>
        </column>

        <!--Key-->
        <column name="Name Product" type="int">
          <constraints nullable="false"/>
        </column>

        <column name="Count Product" type="int">
          <constraints nullable="false"/>
        </column>

        <column name="Name Suppliers" type="varchar(50)">
          <constraints nullable="false"/>
        </column>
        <!--Key-->
        <column name="Full Name Suppliers" type="varchar(50)">
          <constraints nullable="false"/>
        </column>
        <!--Key-->
        <column name="Full Name Employee" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Date Operation" type="date">
          <constraints nullable="false"/>
        </column>

        <column name="Price value" type="double">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Инициализацйия ключей таблицы Приходная накладная-->
      <addForeignKeyConstraint baseColumnNames="Barcode"
                               baseTableName="Base products"
                               constraintName="fk_Base products_Purchase Invoice"
                               referencedColumnNames="Name Product"
                               referencedTableName="Purchase Invoice"/>

      <addForeignKeyConstraint baseColumnNames="IDSuppliers"
                               baseTableName="Suppliers"
                               constraintName="fk_clients_Purchase Invoice"
                               referencedColumnNames="Full Name Client"
                               referencedTableName="Purchase Invoice"/>

      <addForeignKeyConstraint baseColumnNames="IDEmpWare"
                               baseTableName="employee warehouse"
                               constraintName="fk_employee warehouse_Purchase Invoice"
                               referencedColumnNames="Full Name Employee"
                               referencedTableName="Purchase Invoice"/>

      <!--Расходная накладная-->
      <createTable tableName="Sales Invoice">
        <column name="IDSalInv" type="int" autoIncrement="true">
          <constraints primaryKey="true" nullable="false"/>
        </column>

        <!--Key-->
        <column name="Name Product" type="int">
          <constraints nullable="false"/>
        </column>

        <column name="Count Product" type="int">
          <constraints nullable="false"/>
        </column>

        <column name="Name Client" type="varchar(50)">
          <constraints nullable="false"/>
        </column>
        <!--Key-->
        <column name="Full Name Client" type="varchar(50)">
          <constraints nullable="false"/>
        </column>
        <!--Key-->
        <column name="Full Name Employee" type="varchar(50)">
          <constraints nullable="false"/>
        </column>

        <column name="Date Operation" type="date">
          <constraints nullable="false"/>
        </column>

        <column name="Price value" type="double">
          <constraints nullable="false"/>
        </column>
      </createTable>
      <!--Инициализацйия ключей таблицы Приходная накладная-->
      <addForeignKeyConstraint baseColumnNames="Barcode"
                               baseTableName="Base products"
                               constraintName="fk_Base products_Purchase Invoice"
                               referencedColumnNames="Name Product"
                               referencedTableName="Purchase Invoice"/>

      <addForeignKeyConstraint baseColumnNames="IDClients"
                               baseTableName="clients"
                               constraintName="fk_clients_Purchase Invoice"
                               referencedColumnNames="Full Name Client"
                               referencedTableName="Purchase Invoice"/>

      <addForeignKeyConstraint baseColumnNames="IDEmpWare"
                               baseTableName="employee warehouse"
                               constraintName="fk_employee warehouse_Purchase Invoice"
                               referencedColumnNames="Full Name Employee"
                               referencedTableName="Purchase Invoice"/>

    </changeSet>

</databaseChangeLog>





