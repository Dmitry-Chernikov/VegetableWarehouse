<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:pro="http://www.liquibase.org/xml/ns/pro"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd
                   http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd">

        <changeSet  id="001"  author="ChDA">
            <!--Имена продуктов-->
            <createTable  tableName="Products">
                <column  name="IDProduct"  type="bigint" autoIncrement="true" startWith="1" incrementBy="1" >
                    <constraints  primaryKey="true"  primaryKeyName="Products_IDProduct_pk" />
                </column>

                <column  name="Name vegetable"  type="varchar(50)">
                    <constraints unique="true" uniqueConstraintName="Products_Name vegetable_unq"/>
                </column>
            </createTable>


            <!--Еденица измерения-->
            <createTable tableName="Units">
                <column name="IDUnit" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" nullable="false" />
                </column>

                <column name="Product unit" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Designation  unit" type="varchar(20)">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Тип склада-->
            <createTable tableName="Type warehouse">
                <column name="IDTypeWare" type="int" autoIncrement="true">
                    <constraints primaryKey="true" nullable="false" />
                </column>

                <column name="Name  warehouse" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Клиент-->
            <createTable tableName="Clients">
                <column name="IDClients" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" nullable="false" />
                </column>

                <column name="Client name" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Code UNP" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Legal address" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Telephone number" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Full Name" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Working position" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Сотрудник склада-->
            <createTable tableName="Employee warehouse">
                <column name="IDEmpWare" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" nullable="false" />
                </column>

                <column name="Full name" type="varchar(60)">
                    <constraints nullable="false"/>
                </column>

                <column name="Date birth" type="date">
                    <constraints nullable="true"/>
                </column>

                <column name="Position" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Address accommodation" type="varchar(100)">
                    <constraints nullable="false"/>
                </column>

                <column name="Telephone home" type="varchar(20)">
                    <constraints nullable="false"/>
                </column>

                <column name="Telephone mobil" type="varchar(20)">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Поставщики-->
            <createTable tableName="Suppliers">
                <column name="IDSuppliers" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" nullable="false" />
                </column>

                <column name="Supplier name" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Code UNP" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Legal address" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Telephone number" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Working position" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Товары-->
            <createTable tableName="Goods">
                <column name="IDGoods" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" />
                </column>

                <column name="Product" type="bigint">
                    <constraints nullable="false" notNullConstraintName="goods_products_IDProduct_nn"/>
                </column>

                <column name="Name variety" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>

                <column name="Shelf life" type="date">
                    <constraints nullable="false"/>
                </column>

                <column name="Unit" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Name manufacture" type="varchar(100)">
                    <constraints nullable="false"/>
                </column>

                <column name="Country manufacture" type="varchar(100)">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Инициализацйия ключей таблицы Товары-->
            <addForeignKeyConstraint baseTableName="Goods"
                                     baseColumnNames="Product"
                                     constraintName="fk_Goods_Products"
                                     referencedTableName= "Products"
                                     referencedColumnNames="IDProduct"/>

            <addForeignKeyConstraint baseTableName="Goods"
                                     baseColumnNames="Unit"
                                     constraintName="fk_Goods_Units"
                                     referencedTableName="Units"
                                     referencedColumnNames="IDUnit"/>
            <!--База продуктов-->
            <createTable tableName="Base products">
                <column name="Barcode" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" nullable="false"/>
                </column>

                <column name="Warehouse" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Products" type="int">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Инициализацйия ключей таблицы База продуктов-->
            <addForeignKeyConstraint baseTableName="Base products"
                                     baseColumnNames="Warehouse"
                                     constraintName="fk_Base products_Type warehouse"
                                     referencedTableName="Type warehouse"
                                     referencedColumnNames="IDTypeWare"/>

            <addForeignKeyConstraint baseTableName="Base products"
                                     baseColumnNames="Products"
                                     constraintName="fk_Base products_Goods"
                                     referencedTableName="Goods"
                                     referencedColumnNames="IDGoods"/>

            <!--Приходная накладная-->
            <createTable tableName="Purchase Invoice">
                <column name="IDPurInv" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" nullable="false"/>
                </column>

                <!--Key-->
                <column name="Name Product" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Count Product" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Name Suppliers" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>
                <!--Key-->
                <column name="Full Name Suppliers" type="int">
                    <constraints nullable="false"/>
                </column>
                <!--Key-->
                <column name="Full Name Employee" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Date Operation" type="date">
                    <constraints nullable="false"/>
                </column>

                <column name="Price value" type="double">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Инициализацйия ключей таблицы Приходная накладная-->
            <addForeignKeyConstraint baseTableName="Purchase Invoice"
                                     baseColumnNames="Name Product"
                                     constraintName="fk_Purchase Invoice_Base products"
                                     referencedTableName="Base products"
                                     referencedColumnNames="Barcode"/>

            <addForeignKeyConstraint baseTableName="Purchase Invoice"
                                     baseColumnNames="Full Name Suppliers"
                                     constraintName="fk_Purchase Invoice_Suppliers"
                                     referencedTableName="Suppliers"
                                     referencedColumnNames="IDSuppliers"/>

            <addForeignKeyConstraint baseTableName="Purchase Invoice"
                                     baseColumnNames="Full Name Employee"
                                     constraintName="fk_Purchase Invoice_Employee warehouse"
                                     referencedTableName="Employee warehouse"
                                     referencedColumnNames="IDEmpWare"/>

            <!--Расходная накладная-->
            <createTable tableName="Sales Invoice">
                <column name="IDSalInv" type="int" autoIncrement="true" startWith="1" incrementBy="1">
                    <constraints primaryKey="true" nullable="false"/>
                </column>

                <!--Key-->
                <column name="Name Product" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Count Product" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Name Client" type="varchar(50)">
                    <constraints nullable="false"/>
                </column>
                <!--Key-->
                <column name="Full Name Client" type="int">
                    <constraints nullable="false"/>
                </column>
                <!--Key-->
                <column name="Full Name Employee" type="int">
                    <constraints nullable="false"/>
                </column>

                <column name="Date Operation" type="date">
                    <constraints nullable="false"/>
                </column>

                <column name="Price value" type="double">
                    <constraints nullable="false"/>
                </column>
            </createTable>
            <!--Инициализацйия ключей таблицы Приходная накладная-->
            <addForeignKeyConstraint baseTableName="Sales Invoice"
                                     baseColumnNames="Name Product"
                                     constraintName="fk_Sales Invoice_Base products"
                                     referencedTableName="Base products"
                                     referencedColumnNames="Barcode"/>

            <addForeignKeyConstraint baseTableName="Sales Invoice"
                                     baseColumnNames="Full Name Client"
                                     constraintName="fk_Sales Invoice_Clients"
                                     referencedTableName="Clients"
                                     referencedColumnNames="IDClients"/>

            <addForeignKeyConstraint baseTableName="Sales Invoice"
                                     baseColumnNames="Full Name Employee"
                                     constraintName="fk_Sales Invoice_Employee warehouse"
                                     referencedTableName="Employee warehouse"
                                     referencedColumnNames="IDEmpWare"/>
            <!--Создает новую последовательность базы данных.-->
            <createSequence sequenceName="hibernate_sequence" incrementBy="1" startValue="1" />
        </changeSet>

</databaseChangeLog>